<div class="layout-container">
    <div class="songpage-container">
        <div class="grid-container width-100">
            <div class="song-header">
            <% if (result.length > 0) { %>
            <div class="song-text">
                <h2><%= result[0].title %></h2>
                <div class="artist-name"><%= result[0].artist %></div>
                <div class="artist-name"><%= result[0].category %></div>
            </div>
            <img
                class="song-jacket-large skeleton"
                src="https://new.chunithm-net.com/chuni-mobile/html/mobile/img/<%=result[0].image_file_name%>"
                alt=""
                loading="lazy"
            />
            <% } else { %>
                <h2>song data unavailable</h2>
            <% } %>
            </div>
        <div class="difficulty-btns">
            <button id="expertBtn" class="btn-expert">Expert</button>
            <button id="masterBtn" class="btn-master">Master</button>
            <% result.forEach(item => { %>
                <% if (item.difficulty == 'ultima') {%>
                    <button id="ultimaBtn" class="btn-ultima">Ultima</button>
                <% } %>
            <% }); %>
        </div>

        <% result.forEach(item => { %>
        <div class="container-nobg" data-difficulty="<%= item.difficulty %>">
            <div class="large-radar">
                <div class="radar-container-nobg">
                    <canvas
                    class="radar-chart pulse"
                    height="200"
                    width="200"
                    data-pianoValue="<%=item.piano%>"
                    data-staminaValue="<%=item.stamina%>"
                    data-slideValue="<%=item.slide%>"
                    data-trickyValue="<%=item.tricky%>"
                    data-crosshandValue="<%=item.crosshand%>"
                    data-airValue="<%=item.air%>"
                    ></canvas>
                    <img
                    class="radar-layout"
                    src="/radar-track-names.png"
                    alt=""
                    height="200px"
                    width="200px"
                    />
                </div>
            </div>
            <div class="item-details-col">
                <% if (item.difficulty) { %>
                    <% let searchTitle = encodeURIComponent(item.title) %>
                    <% console.log(searchTitle) %>
                    <% if (item.difficulty == 'master') {%>
                    <div class="diff-level master">Master <%= item.lev_mas %></div>
                        <a class="chart-link" href='https://www.youtube.com/results?search_query="<%=searchTitle%>"+<%=item.difficulty%>+Chunithm' target="_blank">
                            <span class="video-link">chart video</span>
                            <img class="video-icon" src="/newtab.svg" >
                        </a>
                    <% } else if (item.difficulty == 'expert') { %>
                    <div class="diff-level expert">Expert <%= item.lev_exp %></div>
                        <a class="chart-link" href='https://www.youtube.com/results?search_query="<%=searchTitle%>"+<%=item.difficulty%>+Chunithm' target="_blank">
                            <span class="video-link">chart video</span>
                            <img class="video-icon" src="/newtab.svg" >
                        </a>
                <% } else { %>
                    <div class="diff-level ultima">Ultima <%= item.lev_ult %></div>
                        <a class="chart-link" href='https://www.youtube.com/results?search_query="<%=searchTitle%>"+<%=item.difficulty%>+Chunithm' target="_blank">
                            <span class="video-link">chart video</span>
                            <img class="video-icon" src="/newtab.svg" >
                        </a>
                    <% } %>
            <% } %>
            </div>
        </div>
        <% }); %>
            <div id="question-radar" class="container-nobg">
            <div class="large-radar">
                <div class="radar-container-nobg">
                    <canvas
                    class="radar-chart pulse"
                    height="200"
                    width="200"
                    data-pianoValue
                    data-staminaValue
                    data-slideValue
                    data-trickyValue
                    data-crosshandValue
                    data-airValue
                    ></canvas>
                    <img
                    class="radar-layout"
                    src="/radar-track-names.png"
                    alt=""
                    height="200px"
                    width="200px"
                    />
                </div>
            </div>
            <div class="item-details-col">
                <% if (result.length > 0) { %>
                <% let searchTitle = encodeURIComponent(result[0].title) %>
                <a class="chart-link" href='https://www.youtube.com/results?search_query="<%=searchTitle%>"+Chunithm' target="_blank">
                    <span class="video-link">chart video</span>
                    <img class="video-icon" src="/newtab.svg" >
                </a>
                <% } %>
            </div>
        </div>
        </div>
        <% if (admin) { %>
        <div>
            <form  method="post">
                <label for="pianoSelect">Piano</label>
                <select name="pianoSelect" id="pianoSelect">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                </select>
                <label for="staminaSelect">Stamina</label>
                 <select name="staminaSelect" id="staminaSelect">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                </select>
                <label for="slideSelect">Slide</label>
                 <select name="slideSelect" id="slideSelect">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                </select>
                <label for="trickySelect">Tricky</label>
                <select name="trickySelect" id="trickySelect">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                </select>
                <label for="crosshandSelect">Crosshand</label>
                <select name="crosshandSelect" id="crosshandSelect">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                </select><label for="airSelect">Air</label>
                <select name="airSelect" id="airSelect">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                </select>
                <label for="difficultySelect">Difficulty</label>
                <select name="difficultySelect" id="difficultySelect">
                    <option value="expert">expert</option>
                    <option value="master">master</option>
                    <option value="ultima">ultima</option>
                </select>
                <button type="submit">Update</button>
            </form>
        </div>
        <% } %>
    </div>
</div>